- Use ProphecyTrait for mocking in test classes
- Declare prophecy properties with type hints in the format: ObjectProphecy|RealType $propertyNameProphecy
- Put ObjectProphecy first in the union type
- Append "Prophecy" to the property name
- Initialize prophecy objects in setUp() method using $this->prophesize()
- Reveal prophecy objects when passing them to the system under test
- Use prophecy's API (willReturn(), shouldBeCalledOnce(), etc.) for setting expectations
- Create separate test methods for success cases and different error scenarios
- Follow a consistent structure in each test:
  - Arrange: Set up test data and prophecy expectations
  - Act: Call the method under test
  - Assert: Verify results or expected expectations